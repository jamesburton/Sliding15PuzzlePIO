#pragma once

// ==============================================================================
// Display Configuration: ESP32-4848S040C_I (Sunton 4.0")
// Based on working SnakePIO configuration
// ==============================================================================

// --- RGB Interface Pins ---
#define PIN_D0    4   // B0
#define PIN_D1    5   // B1
#define PIN_D2    6   // B2
#define PIN_D3    7   // B3
#define PIN_D4    15  // B4

#define PIN_D5    8   // G0
#define PIN_D6    20  // G1
#define PIN_D7    3   // G2
#define PIN_D8    46  // G3
#define PIN_D9    9   // G4
#define PIN_D10   10  // G5

#define PIN_D11   11  // R0
#define PIN_D12   12  // R1
#define PIN_D13   13  // R2
#define PIN_D14   14  // R3
#define PIN_D15   0   // R4

// --- Sync & Control ---
#define PIN_HSYNC 16
#define PIN_VSYNC 17
#define PIN_DE    18
#define PIN_PCLK  21
#define PIN_BL    38

// --- 3-Wire SPI for ST7701S Init ---
#define PIN_SPI_CS  39
#define PIN_SPI_SCK 48
#define PIN_SPI_SDA 47 // MOSI

// --- Touch (GT911) ---
#define PIN_TOUCH_SDA 19
#define PIN_TOUCH_SCL 45
#define PIN_TOUCH_INT -1
#define PIN_TOUCH_RST -1

#define TOUCH_I2C_ADDR 0x14 // Or 0x5D
#define TOUCH_I2C_PORT 0
#define TOUCH_I2C_FREQ 400000

// --- Timing ---
#define WRITE_FREQ_HZ     11000000

#define HSYNC_POLARITY    1
#define HSYNC_FRONT_PORCH 10
#define HSYNC_PULSE_WIDTH 8
#define HSYNC_BACK_PORCH  50

#define VSYNC_POLARITY    1
#define VSYNC_FRONT_PORCH 10
#define VSYNC_PULSE_WIDTH 8
#define VSYNC_BACK_PORCH  20

#define PCLK_ACTIVE_NEG   0

// --- ST7701S Init Sequence (Type 1 with 0xCD, 0x00) ---
static const uint8_t ST7701_INIT_SEQUENCE[] = {
    0xFF, 5, 0x77, 0x01, 0x00, 0x00, 0x10,
    0xC0, 2, 0x3B, 0x00,
    0xC1, 2, 0x0D, 0x02,
    0xC2, 2, 0x31, 0x05,
    0xCD, 1, 0x00,
    0xB0, 16, 0x00, 0x11, 0x18, 0x0E, 0x11, 0x06, 0x07, 0x08, 0x07, 0x22, 0x04, 0x12, 0x0F, 0xAA, 0x31, 0x18,
    0xB1, 16, 0x00, 0x11, 0x19, 0x0E, 0x12, 0x07, 0x08, 0x08, 0x08, 0x22, 0x04, 0x11, 0x11, 0xA9, 0x32, 0x18,
    0xFF, 5, 0x77, 0x01, 0x00, 0x00, 0x11,
    0xB0, 1, 0x60,
    0xB1, 1, 0x32,
    0xB2, 1, 0x07,
    0xB3, 1, 0x80,
    0xB5, 1, 0x49,
    0xB7, 1, 0x85,
    0xB8, 1, 0x21,
    0xC1, 1, 0x78,
    0xC2, 1, 0x78,
    0xE0, 3, 0x00, 0x1B, 0x02,
    0xE1, 11, 0x08, 0xA0, 0x00, 0x00, 0x07, 0xA0, 0x00, 0x00, 0x00, 0x44, 0x44,
    0xE2, 12, 0x11, 0x11, 0x44, 0x44, 0xED, 0xA0, 0x00, 0x00, 0xEC, 0xA0, 0x00, 0x00,
    0xE3, 4, 0x00, 0x00, 0x11, 0x11,
    0xE4, 2, 0x44, 0x44,
    0xE5, 16, 0x0A, 0xE9, 0xD8, 0xA0, 0x0C, 0xEB, 0xD8, 0xA0, 0x0E, 0xED, 0xD8, 0xA0, 0x10, 0xEF, 0xD8, 0xA0,
    0xE6, 4, 0x00, 0x00, 0x11, 0x11,
    0xE7, 2, 0x44, 0x44,
    0xE8, 16, 0x09, 0xE8, 0xD8, 0xA0, 0x0B, 0xEA, 0xD8, 0xA0, 0x0D, 0xEC, 0xD8, 0xA0, 0x0F, 0xEE, 0xD8, 0xA0,
    0xEB, 7, 0x02, 0x00, 0xE4, 0xE4, 0x88, 0x00, 0x40,
    0xEC, 2, 0x3C, 0x00,
    0xED, 16, 0xAB, 0x89, 0x76, 0x54, 0x02, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x20, 0x45, 0x67, 0x98, 0xBA,
    0xFF, 5, 0x77, 0x01, 0x00, 0x00, 0x13,
    0xE5, 1, 0xE4,
    0xFF, 5, 0x77, 0x01, 0x00, 0x00, 0x00,
    0x3A, 1, 0x60, // RGB666
    0x11, 0,       // Sleep Out
    0x29, 0,       // Display On
    0x00           // End of sequence
};
